## UV Project for `uv run`: LLM Agent Guide

**Objective:** Configure a Python project for execution with `uv run`. Dependencies are defined directly in `pyproject.toml`.

**Core Project Files & Structure:**

1.  **`pyproject.toml`**:
    * **Purpose**: Primary configuration. Defines project metadata and dependencies.
    * **Agent Action**: Create/Populate this file.
    * **Key Sections**:
        * `[project]`:
            * `name = "your_project_name"`
            * `version = "0.1.0"`
            * `dependencies = [`
                `  "packageA",        # e.g., "requests"`
                `  "packageB>=1.2",   # e.g., "numpy>=1.23"`
                `  # ... other dependencies`
                `]`
            * `requires-python = ">=3.9"` (Specify compatible Python versions)
        * `[build-system]`: (Standard; less critical if *only* using `uv run` and not building packages)
            * `requires = ["hatchling"]` (or `setuptools`, etc.)
            * `build-backend = "hatchling.build"`
            * `backend-path = ["."]`
    * **Example `pyproject.toml`**:
        ```toml
        [project]
        name = "my_uv_app"
        version = "0.0.1"
        dependencies = [
          "click",
          "httpx[http2]",
        ]
        requires-python = ">=3.10"

        [build-system]
        requires = ["hatchling"]
        build-backend = "hatchling.build"
        backend-path = ["."]
        ```

2.  **`uv.lock`**:
    * **Purpose**: Guarantees reproducible environments by locking exact dependency versions.
    * **Agent Action**: Generate/Update using `uv lock` after `pyproject.toml` changes.
    * **UV Behavior**: `uv run` uses this file (if present) to ensure consistent dependency installation.

3.  **Virtual Environment (`.venv/`)**:
    * **Purpose**: Isolated environment for project dependencies.
    * **Agent Action**: None directly. UV typically auto-creates/manages this in the project root.
    * **UV Behavior**: `uv run` (or `uv lock`/`uv sync`) creates it if needed.

4.  **`.python-version` (Optional File)**:
    * **Agent Action**: Create this file with a version string if specific Python version is required.
    * **UV Behavior**: Overrides `requires-python` for interpreter selection if present.

**Example Project Directory Structure:**

```
your_project_name/
├── .venv/                # Auto-managed by UV
├── src/
│   └── your_project_name/
│       └── main.py       # Your application script
├── pyproject.toml        # YOU CREATE/MANAGE THIS
├── uv.lock               # Generated by `uv lock`
└── .python-version       # Optional: YOU CREATE THIS
```

*(Script `main.py` can also be at project root if not using `src/` layout)*

**Essential UV Commands for Agent Workflow:**

1.  **`uv lock`**:
    * **Use**: After `pyproject.toml` (especially `dependencies`) is created or modified. Resolves dependencies and writes `uv.lock`.
    * **Command**: `uv lock`

2.  **`uv run <script_or_command>`**:
    * **Use**: Execute Python scripts or commands within the UV-managed environment. UV ensures correct Python version and dependencies (from `uv.lock` or `pyproject.toml`) are used.
    * **Command Examples**:
        * `uv run src/your_project_name/main.py`
        * `uv run app.py`
        * `uv run <entry_point_if_defined_in_pyproject.scripts>` (e.g., `uv run my-cli-tool`)

**Optional UV Commands (Less Frequent for this Workflow):**

* **`uv init`**:
    * **Use**: Bootstrap a new project with a template `pyproject.toml`. The agent might prefer creating `pyproject.toml` directly.
    * **Command**: `uv init`
* **`uv venv [--python <version>]`**:
    * **Use**: Explicitly create the virtual environment. Usually not needed as `uv run`/`uv lock` handle this.
    * **Command**: `uv venv`

**Agent Workflow Summary:**

1.  Define project structure and Python scripts.
2.  Create/Update `pyproject.toml` with necessary `[project.dependencies]`.
3.  (Optional) Create `.python-version` if a specific Python interpreter is needed.
4.  Run `uv lock` to generate/update `uv.lock`.
5.  Execute the project using `uv run path/to/script.py`.

uv-project-setup.md
Displaying uv-project-setup.md.
