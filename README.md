# Sleepy AI Army

See `The Grand Vision` section below to get an idea of the end goal of this project.

## Current Status - v0.2

The Sleepy AI Army is currently in a weakened state, but it is functional for limited use cases. 

Let's say you have a bunch of small polish tasks or bugs to fix in your backlog. Sleepy AI Army can help you work through those automatically when you are ready to take a break and be AFK for a while. Right now it can only perform `small tweaks` to strictly specified files, but you can specify many of these small tweaks in your `BACKLOG.md` file in your own project and it will work on all of them while you are AFK.

### Warning

This project is still in the prototyping phase, do not use on production code.

### Details

- It can perform small multi file changes that you specify in your `BACKLOG.md` in your own project.
- It can perform multiple of these changes in a single run, but they each need to be specified as their own task in the `BACKLOG.md`.
- For each task
  - It will create a new folder in `ai-missions` and perform the work in that folder.
  - It will create a new git branch for each task and commit the changes to that branch if aider runs successfully.
- Files Created 
  - `mission-spec.md` - The original task description from the `BACKLOG.md`
  - `mission-report.md` - The final status of the task
  - `logs/`
    - `overview.log` - A high level log of the task
    - `detailed.log` - A detailed log of the task - You can see the aider output here

### Components

- `Infantry` - Capable of making a small changes to a files based on a prompt. Each file meant to be updated, created or referenced must contain the relative path to the file from the root of the git repository.
- `Secretary` - Converts the `BACKLOG.md` into new ai-missions folders and records the folder names for the General that should be operated on
- `General` - Initiates the Secretary, upon completion, reads the folder names to operate on and starts a new Army Infantry for each folder

Each component is capable of running separately with their own configurations for testing and development. For normal usage, only the General needs to be run.

Note: Each component directly taken from a proof of concept, so the code is very messy. We wanted to bring the project to a useful state as fast as possible though, so this is sufficient for now. Subsequent updates will clean up the code and make it more maintainable.

<center>
  <img src="docs\flowchart.png">
</center>

### Limitations

There is currently no support for:
- Testing
- Review Process
- Task Prioritization
- Task Dependencies
- Conflict Resolution

### Current Frameworks

- Coding - Aider 
  - Note: Currently using Gemini 2.5 Pro, but this can be any model that Aider supports
  - Note: Currently uses the prompting technique: Analyze -> Brainstorm -> Code. This is not the most cost efficient prompting technique, but it does get good results most of the time.

- Document Generation - Gemini models 
  - Note: Currently uses `gemini-2.0-flash-exp` and `gemini-2.5-flash-preview-05-20`
  - Note: Only Gemini can be specified right now. Also, it's using the general gemini servers, does not support Vertex.

### Example Git Commits
Below is an example of the git commits that were generated by the Sleepy AI Army on a recent run with a single task of adding some comments to functions in a Godot project.  This example cost $0.02 using Gemini-2.5 Pro Preview. Full file refactoring can be in the range of $0.04 - $0.06 for files with less than 500 lines.

<center>
  <img src="docs\v0.2-changelist-multiple-branches.png">
</center>

<center>
  <img src="docs\v0.2-multi-file-editing.png">
</center>

### Setup

- Clone this project
- Install `uv` if you haven't already
- Create your Gemini API Key in `Google AI Studio`
- Create a `.env` file in `army-infantry` and `army-secretary` folders with your Gemini API Key
  - See `.env.example` in each component for the format
- Update `config.yml` in each of the three main components with your preferred LLM models and any other settings you want to change. 
  - Importantly update `root_git_path` in `army-general\config.yml` to the project folder you want the Sleepy AI Army to modify code in.
- Add `.aider.sleepy.conf.yml` to the project you want the Sleepy AI Army to modify code in. 
  - See `.example.aider.conf.yml` in this project for the format
  - Important - Do not specify any `read` files in this aider configuration, for some reason it adds them after aider completes and it breaks writing the files.
- Add `ai-docs/CONVENTIONS.md` to the project you want the Sleepy AI Army to modify code in. 
  - This is a standard conventions file that the Sleepy AI Army's aider node will use to guide its coding. 

### Usage

- Update `BACKLOG.md` in the project you want to the Sleepy AI Army to code in. 
  - Each task should specify a short title, a description of the work to do with one or more files specified with their on relative path to the root of the git repository.
  - See `BACKLOG.md.example` in this project for an example.
- Use `run-general.bat` in the root directory of this project.

#### Running on a Specific Mission

If you want to run the Sleepy AI Army on a specific mission folder, you can use `run-general-on-mission.bat` in the root directory of this project.  This is useful if the mission failed but you've updated the mission-spec.md file to correct the issue.  It will prompt you for the full path to the mission folder.  It will then run the `army-general` on just that mission folder.


### Important Considerations

- Don't use `gemini-2.0-flash-exp` for projects that require confidential information. It's free, but it's not private.

&nbsp;
&nbsp;
&nbsp;

---

&nbsp;
&nbsp;
&nbsp;

# Sleepy AI Army

## The Unwavering Challenge: The Developer's Dilemma

Picture this: you're deep in development on your passion project – perhaps a new game mechanic in Godot or a cutting-edge web application. You're pouring all your focus into innovation, making significant strides.

But that nagging feeling persists... your backlog. It's a familiar list of important but less glamorous tasks:

  * That tricky navigation bug where characters get stuck on simple obstacles.
  * The need to refactor a core module for better maintainability.
  * A half-finished feature request that's been gathering dust for weeks.

While you're immersed in complex work, these crucial items often remain untouched. It's the classic developer dilemma: focus is a finite resource, and you can only truly concentrate on one complex challenge at a time.

Wouldn't it be amazing if *something* could strategically advance these other fronts while you focus, or even while you sleep? What if an intelligent system could analyze complex issues, draft plans, conduct reconnaissance on your codebase, and even execute well-defined tasks?

**This is the core problem Sleepy AI Army solves:** It empowers you to conquer your backlog and accelerate your project's momentum by transforming your downtime into productive uptime.

## Our Vision: Your Strategic & Tactical AI Assistant Crew

Sleepy AI Army is your **AI-powered assistant crew**, meticulously designed to help you make steady, significant progress on your software projects, especially during your downtime. It's more than just an automation tool; it's a structured ecosystem of specialized AI agents working in concert under your strategic command.

<center>
  <img src="docs/army.png" alt="AI Army icon">
</center>

**How Sleepy AI Army Helps:**

  * You populate your `BACKLOG.md` with tasks, from simple tweaks to ambitious features.
  * When you're away – sleeping, at the gym, or focusing on other priorities – **Sleepy AI Army activates its "Operation: Next Level" protocol.**
  * It intelligently triages tasks, deploying a sophisticated command structure to analyze, plan, and execute, ensuring that every AFK period translates into tangible progress across your entire project.

Think of it as your dedicated officer corps and specialist units, diligently working on your strategic objectives while you're occupied, ensuring not just incremental steps, but well-planned campaigns towards larger goals.

## The "Operation: Next Level" Strategy - How Your Army Works

Sleepy AI Army now operates with a sophisticated command structure, ensuring that tasks of varying complexity are handled with appropriate strategic depth and tactical precision.

1.  **Initial Triage (`Triage Officer`):**

      * Backlog items are first assessed.
      * **Simple, well-defined tasks** (e.g., "Rename variable X in file Y") are fast-tracked, directly becoming `Missions` for immediate action.
      * **Complex, less-defined objectives** (e.g., "Implement a new user roles system," "Overhaul the error handling framework") are designated as `Battlefields`.

<center>
  <img src="docs/v1-backlog-triage.png">
</center>

2.  **The `Battlefield` (`ai-battlefields/`):**

      * For each complex objective, a dedicated `Battlefield` workspace is established. This is where the campaign to achieve the larger goal will be orchestrated.

3.  **The `Battle Captain` (Your AI Strategic Planner):**

      * An advanced AI agent assigned to each `Battlefield`. The `Battle Captain` is your chief strategist for that objective.
      * It deeply analyzes the `Battlefield`'s goal, performs initial assessment, and determines the intelligence needed.
      * It can dispatch a `Recon Agent` on `Recon Missions` to gather detailed information about the codebase, dependencies, and potential challenges.
      * Based on its analysis and any reconnaissance data, the `Battle Captain` formulates **`Mission Plans`** – detailed proposals for concrete steps to achieve parts of the overall `Battlefield` objective.
      * **Crucially, these `Mission Plans` are presented for YOUR strategic review and approval.** You, as the Commander-in-Chief, give the go-ahead before any significant action is taken on these complex fronts. (e.g., by moving approved plan files to an `ai-missions-approved/` directory).

4.  **The Specialized Corps (Your AI Agents):**

      * **`Recon Agent`:** Gathers vital intelligence from your codebase – relevant files, dependencies, code structure – providing the `Battle Captain` with the necessary battlefield awareness.
      * **`Intel Officer` (Documentation Specialist):** A dedicated agent that can be tasked with `DocWritingMissions` to generate, update, or explain documentation for features or code sections, based on plans from the `Battle Captain` or direct `Missions`.
      * **`Infantry Agent` (Code Executor):** Your reliable AI workhorse. It receives approved `Missions` (either directly for simple tasks or from the `Battle Captain` via your approval).
          * It executes these well-defined coding tasks with precision, using the full context provided in the `Mission` brief.
          * **Key Mandate:** The `Infantry Agent` operates on its specific orders and provided intelligence *without* asking further questions or attempting to broaden context during its execution run, ensuring focused and predictable action.
          * It handles Git operations, creating branches, committing changes, and potentially even drafting Pull Requests as defined in its `Mission`.

5.  **Iterative Campaigns & Quality Assurance:**

      * The `Battle Captain` doesn't just plan once; it observes the outcomes of executed `Missions` and iteratively refines its strategy for the `Battlefield`, proposing new `Mission Plans` as needed.
      * All AI agents operate with an underlying **"Generate-Critique-Regenerate" (GCR)** protocol, an internal quality assurance loop to refine their outputs (plans, recon reports, code, documentation) before they are finalized or presented for your review.

<center>
  <img src="docs/v1-planning-coding.png">
</center>
<center>
  <img src="docs/v1-human-review.png">
</center>

## What Sleepy AI Army Delivers

This enhanced strategic framework allows Sleepy AI Army to address common development headaches with greater power and precision:

  * **Conquer Stagnant Backlogs:** Systematically advances both simple and complex tasks, ensuring nothing gathers dust for long.
  * **Strategic AI, Controlled Impact:** Your approval of `Mission Plans` from the `Battle Captain` ensures AI efforts are always aligned with your strategic intent, mitigating AI overreach on complex features.
  * **Unlock Development Velocity:** Enables true parallel progress across multiple `Battlefields` and `Missions` during your downtime, significantly accelerating your project's overall development lifecycle.
  * **Automate the Grunt Work (and Beyond\!):** From simple code tweaks (`Infantry Agent`) to in-depth reconnaissance (`Recon Agent`), initial documentation drafts (`Intel Officer`), and strategic breakdown of complex features (`Battle Captain`), the Army handles the preparatory and often tedious work.
  * **Enable Your Focus:** By entrusting the systematic advancement of your backlog to Sleepy AI Army, you can dedicate your active development time to the most creative, challenging, and high-impact work, knowing the rest of your project is also moving forward.

## Setting Clear Boundaries

Sleepy AI Army is powerful, but it's important to understand its designed role:

  * **Not an Instant App Generator:** You can't give it vague commands like "build me a social media site" and expect a finished product. It excels at working on *existing* projects with tasks you define in your backlog, or by breaking down larger features you initiate as `Battlefields`.
  * **Not a Developer Replacement – You Command the Campaign:** It's an *assistant crew*. Your strategic decisions, particularly the approval of `Mission Plans` proposed by the `Battle Captain`, are paramount. The AI handles reconnaissance, planning options, and tactical execution, but *you* direct the overall strategy and make the critical go/no-go decisions.
  * **Not (Yet) a Fully Autonomous Project Manager:** While the `Battle Captain` provides sophisticated planning and task decomposition for its assigned `Battlefield`, overall project management, cross-Battlefield prioritization (beyond initial triage), and complex resource allocation remain your responsibility.

## Join the Ranks & Revolutionize Your Workflow\!

Sleepy AI Army, with its "Operation: Next Level" strategy, represents a new frontier in AI-assisted software development. It’s about creating a true partnership between human ingenuity and artificial intelligence, where each plays to its strengths. Delegate the systematic siege of your backlog to your AI Army, and reclaim your focus for the breakthroughs only you can make.

The future of development is not about being replaced by AI, but being *empowered* by it. Enlist your Sleepy AI Army and transform your downtime into your greatest strategic advantage.
